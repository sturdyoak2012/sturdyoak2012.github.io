<!DOCTYPE html>
<head>
	<title>Jacob Nie</title>

	<link href="lib/css/lightbox.css" rel="stylesheet">
	<link rel="stylesheet" href="style.css">
	<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-132703009-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-132703009-1');
</script>

<script src="https://www.gstatic.com/firebasejs/5.8.2/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.8.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.8.2/firebase-database.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyA7-t4UBOoWgYq65D74vbluIwuuDotKlG8",
    authDomain: "jacobnie-4a6fd.firebaseapp.com",
    databaseURL: "https://jacobnie-4a6fd.firebaseio.com",
    projectId: "jacobnie-4a6fd",
    storageBucket: "jacobnie-4a6fd.appspot.com",
    messagingSenderId: "202057575155"
  };
  firebase.initializeApp(config);
</script>

<script>

  var request = new XMLHttpRequest();
  request.open('GET', 'https://ipapi.co/json', true);
  request.onload = function () {
    if (request.status >= 200 && request.status < 400) {
      // Success!
      var data = JSON.parse(request.responseText);
      
        firebase.database().ref("/analytics/").child(btoa(data.ip)).child("visits").once("value").then(function(snapshot) {
        	firebase.database().ref("/analytics/").child(btoa(data.ip)).update({
        		visits:(snapshot.val()||0) + 1,
        		data:data,
				lastVisit:{
	          		page:window.location.pathname,
	          		timestamp:new Date() + ""
	          	}
	        });
	        firebase.database().ref("/analytics/").child(btoa(data.ip)).child("history").push({
	          	page:window.location.pathname,
	          	timestamp:new Date() + ""
	          });
        })
      
    }
  };
  request.onerror = function () {
    // There was a connection error of some sort
  };
  request.send();
</script>
</head>
<body>
<div id="menu">
	<h1 align="center"> <a href="index.html">Jacob Nie</a> </h1>
	<ul>
		<li><a href="about.html">About</a></li>
		<li><a href="pictures.html">Pictures</a></li>
		<li><a href="outdoors.html">Outdoors</a></li>
		<li><a href="comics.html">Comics</a></li>
		<li><a href="physics.html">Physics</a></li>
	</ul>
</div>
<div id="page">
	<h4>My website</h4>
	From my trip in Kings Canyon National Park, photo taken between Cinder and Brewer Col:
	<br><br>
	<a href="IMG_0054.JPG" data-lightbox="group" data-title="Kings Canyon NP"><img src="IMG_0054.JPG" class="lefty"></a>
	<br><br><br><br>
	For stuff about me you can see my <a href="about.html">about page</a>.
	<br><br>
	If you'd like to see pictures you can find one on my <a href="pictures.html">pictures page</a>.
	<ul>
	</ul>
	<br><br>
	I like to do some outdoor stuff, like backpacking, climbing, and cycling.  If you'd like to see more stuff about that, including a lot of trip reports from my "travels", you can see my <a href="outdoors.html">outdoors page</a>.
	<ul>
		<li><b>New:</b> another trip to <a href="outdoors/181227/181227.html">Yosemite</a>!</li>
		<li><b>New:</b> wrote a trip report for <a href="outdoors/180419/180419.html">Big Sur</a> trip back in April</li>
	</ul>
	<br><br>
	When I'm bored in class I sometimes draw small comics.  The collection is small right now, but it will get larger once teachers stop breathing down my neck!  Find them <a href="comics.html">here</a>!
	<br><br>
	For my science stuffs, go to -> <a href="physics.html">physics page</a>.
	<ul>
		<li><b>New:</b> <a href="physics/bucket.html">what shape do you see when you shine a light into a bucket?</a></li>
	</ul>

</div>	

<script src="lib/js/jquery.min.js"></script>
<script src="lib/js/lightbox.min.js"></script>
<script>
    lightbox.option({
		albumLabel:"Image %1 of %2"
    })
</script>
</body>

</html>